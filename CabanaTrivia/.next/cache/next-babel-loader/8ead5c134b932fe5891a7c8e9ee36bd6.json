{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nvar __jsx = React.createElement;\nimport React, { Component } from 'react';\nimport Button from '@material-ui/core/Button';\nimport DangerButton from './DangerButton';\nimport Grid from '@material-ui/core/Grid';\nimport Backdrop from '@material-ui/core/Backdrop';\nimport AnswersComponent from './Answers';\nimport GameOverComponent from './GameOver';\nimport FeedbackComponent from './Feedback';\n\nvar Entities = require('html-entities').AllHtmlEntities;\n\nimport { styles } from '../stylesheet.js';\nvar entities = new Entities();\nvar MAX_NUM_QUESTIONS = 3;\nvar FEEDBACK_SHOW_TIME_SECS = 2; // component that displays the questions or the game over component\n\nvar QuestionsComponent = /*#__PURE__*/function (_Component) {\n  _inherits(QuestionsComponent, _Component);\n\n  function QuestionsComponent(props) {\n    var _this;\n\n    _classCallCheck(this, QuestionsComponent);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(QuestionsComponent).call(this, props));\n    _this.state = {\n      startGame: true,\n      singlePlayer: true,\n      duration: 1,\n      questionIndex: 0,\n      currentScore: 0,\n      showFeedback: false,\n      lastQuestionCorrect: false,\n      lastQuestionAnswer: \"\"\n    };\n    _this.nextQuestion = _this.nextQuestion.bind(_assertThisInitialized(_this));\n    return _this;\n  } // calls function to fetch the questions before the component mounts\n\n\n  _createClass(QuestionsComponent, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      this.onGetQuestions();\n    } // fetch quesions from cocktail trivia\n\n  }, {\n    key: \"onGetQuestions\",\n    value: function onGetQuestions(category) {\n      var finalCateg, response, allData;\n      return _regeneratorRuntime.async(function onGetQuestions$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              finalCateg = category == null ? \"entertainment-music\" : category; //fetch questions\n\n              _context.next = 3;\n              return _regeneratorRuntime.awrap(fetch(\"https://cocktail-trivia-api.herokuapp.com/api/category/\" + finalCateg));\n\n            case 3:\n              response = _context.sent;\n              _context.next = 6;\n              return _regeneratorRuntime.awrap(response.json());\n\n            case 6:\n              allData = _context.sent;\n              this.setState({\n                questionsArr: allData\n              });\n\n            case 8:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, this);\n    } //changes to the next question. isCorrect ia a bool for if the previous value was correct. correctAnswer is the correct answer\n\n  }, {\n    key: \"nextQuestion\",\n    value: function nextQuestion(isCorrect, correctAnswer) {\n      var _this2 = this;\n\n      var score = isCorrect ? this.state.currentScore + 1 : this.state.currentScore;\n      var nextQIndex = this.state.questionIndex + 1;\n      this.setState({\n        lastQuestionCorrect: isCorrect\n      });\n      this.setState({\n        lastQuestionAnswer: correctAnswer\n      });\n      this.setState({\n        showFeedback: true\n      });\n      setTimeout(function () {\n        _this2.setState({\n          showFeedback: false\n        });\n      }, FEEDBACK_SHOW_TIME_SECS * 1000);\n      this.setState({\n        currentScore: score\n      });\n      this.setState({\n        questionIndex: nextQIndex\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return __jsx(\"div\", {\n        style: styles.root\n      }, __jsx(Backdrop, {\n        open: this.state.showFeedback\n      }, __jsx(FeedbackComponent, {\n        wasCorrect: this.state.lastQuestionCorrect,\n        correctAnswer: this.state.lastQuestionAnswer\n      })), __jsx(Grid, {\n        container: true,\n        direction: \"column\",\n        justify: \"center\",\n        alignItems: \"center\"\n      }, this.state.questionIndex < MAX_NUM_QUESTIONS && __jsx(React.Fragment, null, __jsx(\"p\", {\n        style: styles.questionText\n      }, this.state.questionsArr && entities.decode(this.state.questionsArr[this.state.questionIndex].text), \"   \"), __jsx(AnswersComponent, {\n        answers: this.state.questionsArr && this.state.questionsArr[this.state.questionIndex].answers,\n        callback: this.nextQuestion\n      })), this.state.questionIndex >= MAX_NUM_QUESTIONS && __jsx(React.Fragment, null, __jsx(GameOverComponent, {\n        score: this.state.currentScore,\n        callback: this.props.callback\n      }))));\n    }\n  }]);\n\n  return QuestionsComponent;\n}(Component);\n\nexport default QuestionsComponent;","map":null,"metadata":{},"sourceType":"module"}